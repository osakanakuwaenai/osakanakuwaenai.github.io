<!DOCTYPE html>
<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosansjapanese.css">
  <link rel="stylesheet" href="../../index.css">

  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

  <link rel="icon" href="../../icon.svg">

  <title>投稿する - KIJITORAGAMES</title>
  <noscript><link rel="stylesheet" href="osakanakuwaenai.github.io/osakanakuwaenai.github.io/noscript.css"></noscript>
</head>
<body>
<noscript>
  <h1><b>バーロー、このページはJavaScriptがないと力が出ない(=動かない)んだZOY★</b></h1>
  <font size="-2" class="varkaching-garn">え?じゃあもういいって?ｴｯｳｿ本当にお願いしますからJava Scriptを入れてくださいよろしくお願いします</font>
</noscript>
<header>
  <ul>
    <li><a href="//osakanakuwaenai.github.io"><nobr>&emsp;HOME&emsp;</nobr></a></li>
    <li><a href="//osakanakuwaenai.github.io/programing"><nobr>&emsp;プログラミング&emsp;</nobr></a>
      <ul>
        <li><a href="//osakanakuwaenai.github.io/programing/js">Java Script</a></li>
        <li><a href="//osakanakuwaenai.github.io/programing/scratch">Scratch</a></li>
      </ul>
    </li>
    <li><a href="//osakanakuwaenai.github.io/minecraft"><nobr>&emsp;&emsp;マイクラ&emsp;&emsp;</nobr></a>
      <ul>
        <li><a href="//osakanakuwaenai.github.io/minecraft/building">建築</a></li>
        <li><a href="//osakanakuwaenai.github.io/minecraft/redstone">赤石</a></li>
        <li><a href="//osakanakuwaenai.github.io/minecraft/rtm">RealTrainMod</a></li>
        <li><a href="//osakanakuwaenai.github.io/minecraft/others">その他のMOD</a></li>
      </ul>
    </li>
    <li><a href="//osakanakuwaenai.github.io/music"><nobr>&emsp;&emsp;&emsp;作曲&emsp;&emsp;&emsp;</nobr></a>
      <ul>
        <li><a href="//osakanakuwaenai.github.io/music/undertale">UNDERTALE</a></li>
        <li><a href="//osakanakuwaenai.github.io/music/original">オリジナルBGM</a></li>
        <li><a href="//osakanakuwaenai.github.io/music/others">その他</a></li>
      </ul>
    </li>
    <li><a href="//osakanakuwaenai.github.io/pictures"><nobr>&emsp;&emsp;&emsp;&emsp;絵&emsp;&emsp;&emsp;</nobr></a>
      <ul>
        <li><a href="//osakanakuwaenai.github.io/pictures/dots">ドット絵</a></li>
        <li><a href="//osakanakuwaenai.github.io/pictures/others">その他の絵</a></li>
      </ul>
    </li>
    <li><a href="https://forms.gle/VAdJjueZNdRPJi9aA"><nobr>&emsp;&emsp;制作依頼&emsp;&emsp;</nobr></a></li>
  </ul>
</header>
<div class="yes-script-text">
  <style>
    #editor_all {
      display: flex;
    }
    #editor_main {
      width: 60%;
      height: 26rem;
      border: solid 2px;
      overflow: hidden;
      text-align: left;
      display: block;
    }
    #editor_main input#title {
      width: 100%;
      font-size: 200%;
      border-color: green;
      border-style: solid;
      padding: 7px;
    }
    .table-title {
      font-size: 150%;
      border-color: green;
      border-style: solid;
      padding-left: 0px;
      padding-right: 0px;
      padding-top: 7px;
      padding-bottom: 7px;
    }
    #download-settings {
      width: 40%;
      height: 26rem;
      border-color: lime;
      border-style: solid;
      display:      block;
      overflow: scroll;
    }
    #download-settings input[type="text"], #download-settings input[type="url"] {
      width: auto;
      height: 1.5rem;
      border-color: green;
      border-style: solid;
    }
    .table {
      border-collapse: collapse;
      border-color: chartreuse;
    }
    #editor-main {
      height:20rem;
    }
    #download-settings {
      text-align: center;
    }
    
  </style>

  <h1>投稿用エディタ</h1>
  <p>荒い作りですが、お許しください。</p>
  <div id="editor_all">
    <div id="editor_main">
      <input id="title" type="text" placeholder="タイトルを入力…"><br>
      <div id="editor-toolbar">
        <span class="ql-formats">
          <span class="ql-picker">
            <span class="ql-picker-label" tabindex="0" role="button" aria-expanded="false" aria-controls="ql-picker-options-0">
              
            </span>
          </span>
        </span>
        <span class="ql-formats"></span>
        <span class="ql-formats"></span>
        <span class="ql-formats"></span>
        <span class="ql-formats"></span>
        <span class="ql-formats"></span>
        <span class="ql-formats"></span>
        <span class="ql-formats"></span>
        <span class="ql-formats"></span>
        <span class="ql-formats"></span>
        <span class="ql-formats"></span>
      </div>
      <div id="editor-main">
        どうもみなさんこんにちは！&lt;username&gt;です！<br>
        &lt;name&gt;って&lt;howiswork&gt;ですよね、<br>
        &lt;howiswork&gt;ですよね、<br>
        &lt;howiswork&gt;ですよね！！！()
      </div>
    </div>
    <div id="download-settings">
      <h2>ダウンロードページの編集</h2>
      <div id="tables">
      </div>
      <button onclick="tableAdder()" class="l-r">＋</button>
    </div>
  </div>
  <br>
  <button class="lefter" onclick="MakeView()" title="ビューを表示します。">ビューを表示</button><button class="righter" onclick="makeview()" view="htmlを出力します。これをgithubに提出してください。">HTML を出力</button>
  <div id="preview">
  </div>

  <!-- The script is for create table. -->
  <script>
    let tbs = document.getElementById("tables"); //TaBleS
    let value_num = 0;
    let strtb =
    `<div class="${value_num}">
      <input type="title" class="table-title ${value_num}">
      <table class="table ${value_num}">
        <tr>
          <th></th><th><input type="text"></th>
        </tr>
        <tr>
          <th><input type="text"></th><td><input type="url"></td>
        </tr>
        <tr>
          <th><input type="text"></th><td><input type="url"></td>
        </tr>
      </table>

      <label>
        <input type="radio" name="radio-${value_num}">
        <input type="number" min="1" class="num-${value_num}">
        <select class="col-or-row ${value_num}">
          <option value="">--選択--</option>
          <option value="col">列</option>
          <option value="row">行</option>
        </select>目<br>
      </label>

      <label>
        <input type="radio" name="radio-${value_num}">
        最後の
        <select class="col-or-row ${value_num}">
          <option value="">--選択--</option>
          <option value="col">列</option>
          <option value="row">行</option>
        </select>を
      </label>
  
      <br>
<button class="lefter btn ${value_num}" onclick="rowcolAdder(${value_num})" title="特定の列・行を追加します。">追加する</button>\
<button class="middler btn ${value_num}" onclick="rowcolDeleter(${value_num})" title="特定の列・行を削除します。">削除する</button>\
<button class="righter btn ${value_num}" onclick="tableDeleter(${value_num})" title="注：リストを削除します。">&nbsp;ー&nbsp;</button><br><br>
    </div>`;

    function tableAdder() {
      tbs.insertAdjacentHTML("beforeend", strtb);
      value_num++;
      strtb =
        `<div class="${value_num}">
        <input type="title" class="table-title ${value_num}">
        <table class="table ${value_num}">
          <tr>
            <th></th><th><input type="text"></th>
          </tr>
          <tr>
            <th><input type="text"></th><td><input type="url"></td>
          </tr>
          <tr>
            <th><input type="text"></th><td><input type="url"></td>
          </tr>
        </table>

        <label>
          <input type="radio" name="radio-${value_num}">
          <input type="number" min="1" class="num-${value_num}">
          <select class="col-or-row ${value_num}">
            <option value="">--選択--</option>
            <option value="col">列</option>
            <option value="row">行</option>
          </select>目<br>
        </label>

        <label>
          <input type="radio" name="radio-${value_num}">
          最後の
          <select class="col-or-row ${value_num}">
            <option value="">--選択--</option>
            <option value="col">列</option>
            <option value="row">行</option>
          </select>を
        </label>

        <br>
<button class="lefter btn ${value_num}" onclick="rowcolAdder(${value_num})" title="特定の列・行を追加します。">追加する</button>\
<button class="middler btn ${value_num}" onclick="rowcolDeleter(${value_num})" title="特定の列・行を削除します。">削除する</button>\
<button class="righter btn ${value_num}" onclick="tableDeleter(${value_num})" title="注：リストを削除します。">&nbsp;ー&nbsp;</button><br><br>
    </div>`;
    };

    function tableDeleter(num) {
      let isGetConfirm = true;
      let deleteDiv = document.getElementsByClassName(num).item(0);
      if (document.getElementsByClassName(num).item(1).value !== "") {isGetConfirm = false;}
      else {
        let dTable = document.getElementsByClassName(num).item(2);
        
        labelOf: {
          for (let dRow of dTable.rows) {
            for (let dCell of dRow.cells) {
              let dItem = dCell.children.item(0);
              if (dItem.value !== null) {isGetConfirm = false;}
            }
            if (isGetConfirm === true) {break labelOf;}
          }
        }
      }
      if (isGetConfirm || confirm("表を削除します。\n本当にいいのですか？")){
        deleteDiv.remove();
      }
    }

    function rowcolAdder(num) {
      let lines;
      let isrow;
      const table = document.getElementsByClassName("table " + num).item(0);
      const radio = document.getElementsByName("radio-" + num);

      if (radio.item(0).checked) {
        lines = Number(document.getElementsByClassName("num-" + num).item(0).value);
        isrow = document.getElementsByClassName("col-or-row " + num).item(0).value == "row";
      } else if (radio.item(1).checked) {
        lines = -1;
        isrow = document.getElementsByClassName("col-or-row " + num).item(1).value == "row";
      } else if (confirm("numの値を使って実行しますか？")) {
          lines = Number(document.getElementsByClassName("num-" + num).item(0).value);
          isrow = document.getElementsByClassName("col-or-row " + num).item(0).value == "row";
      } else {return;};
      if (isrow) {
        let insertedRow = table.insertRow(lines); //Since it is not possible to generate th with insertcell,
        let th = document.createElement("th"); //Create th,
        th.innerHTML = "<input type=\"text\">"; //Set innerHtml,
        insertedRow.appendChild(th); //And, use appendchild

        let j = table.outerHTML.match(/<td>/g).length / (table.outerHTML.match(/<tr>/g).length  -1/*except td which only has th*/  -1/*Except for the td (insertedRow) created earlier*/);
        for (let i = 0; i < j; i++) {
          let td = insertedRow.insertCell(-1);
          td.innerHTML = "<input type=\"url\">";
        }
      
      } else if (!isrow) {
        let th = document.createElement("th");
        th.innerHTML = "<input type=\"text\">";
        table.rows[0].appendChild(th);
        
        let len = table.rows.length;
        for (let i = 1; i < len; i++) { //The reason for setting "i = 1;" is to prevent td from entering where th is added.
          let td = table.rows[i].insertCell(lines);
          td.innerHTML = "<input type=\"url\">";
        }        
      };
    };
    
    function rowcolDeleter(num) {
      let lines;
      let isrow;
      const table = document.getElementsByClassName("table " + num);
      const radio = document.getElementsByName("radio-" + num);
      if (radio.item(0).checked) {
        lines = Number(document.getElementsByClassName("num-" + num).item(0).value);
        isrow = document.getElementsByClassName("col-or-row " + num).item(0).value == "row";
      } else if (radio.item(1).checked) {
        lines = -1;
        isrow = document.getElementsByClassName("col-or-row " + num).item(1).value == "row";
      } else if (confirm("numの値を使って実行しますか？")) {
        lines = Number(document.getElementsByClassName("num-" + num).item(0).value);
        isrow = document.getElementsByClassName("col-or-row " + num).item(0).value == "row";
      } else {return;};
      if (isrow) {
        table.deleteRow(num);
      } else {
        for (let i; i < table.rows.length; i++) {
          table.rows[i].deleteCell(num);
        }
      }
    }


  </script>

  <!-- The script is for create biew and HTML. -->
  <script>

  </script>

  <script src="https://cdn.quilljs.com/1.3.7/quill.js"></script><script>
    const KJTRCLRS = [
      '#988500', 'chocolate', 'maroon', 'purple', 'navy', 'darkslategray', 'darkgreen',
      '#BA0', '#DE8500', 'crimson', 'mediumorchid', 'mediumblue', 'cadetblue', 'forestgreen',
      '#DC0', 'orange', 'red', 'magenta', 'blue', 'cyan', 'lime',
      'khaki', 'navajowhite', 'pink', 'plum', 'lightskyblue', 'paleturquoise', 'aquamarine',
      'black', 'dimgray', 'gray', 'silver', 'lightgray', 'gainsboro', 'white'
    ];

    const KJTRTOOLBAR = [
            [{ header: ['2', '3', false] }],
            ['bold', 'italic', 'underline', 'strike'],
            [{'list': 'ordered'}, {'list': 'bullet'}],
            [{'script': 'sub'}, { 'script': 'super'}],
            ['link', 'image', 'video'], 
            [{'color': KJTRCLRS}, {'background': KJTRCLRS}],
            [{'size': ['large', false, 'small'] }]
            ['formula', 'code-block'],
            [], ['clean'],
        ];

    var quill = new Quill('#editor-main', {
      theme: 'snow',
      modules: {
        toolbar: {
          container: KJTRTOOLBAR,
          //container: '#editor-toolbar',
          handlers: {

          }
        }
      },
    });
  </script>
</div>
</body>
